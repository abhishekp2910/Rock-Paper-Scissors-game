<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock Paper Scissors</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
    <h1 align="center" id="head-name">Rock Paper Scissors</h1><br><br><br>

        <div class="score-count">
            <div class="score-box" id="Player">
                 Player : 0
            </div>
            <div class="score-box" id="Computer">
                 Computer : 0
            </div>
        </div>
    </header>
    <main>
        <div align="center">
            <h3 id="userMove" style="color: blue;"></h3><br>
            <h3 id="computerMove" style="color:red"></h3>
        </div><br><br>
    <div class="choices">
        <div class="box">
            <button onclick="play('ROCK')">
                <img src="images/rock.jpg" alt="rock" width="120px" height="150px" >
            </button>
        </div>
        <div class="box">
            <button onclick="play('PAPER')">
                <img src="images/Paper.jpg" alt="paper" width="120px" height="150px">
            </button>
        </div>
        <div class="box">
            <button onclick="play('SCISSORS')">
                <img src="images/Scissors.jpg" alt="scissors" width="120px" height="150px">
            </button>
        </div>
    </div>
    </main>
    <br><br><br>
       
    <footer>   
        <div>
        <h1 id="status" align="center" >Choose Your Weapon...</h1>
      
        <div class="match-count">
            <div  id="mw">
                 Matches Won : 0
            </div>
            <div  id="ml">
                 Matches Lost : 0
            </div>
        </div>
       
    </div>
    </footer>


    <script>
        let pScore = 0;
        let cScore = 0;
        const WINNING_SCORE=5;
        let matchesWon=0;
        let matchesLost=0;

        let counter={
            win:0,
            lose:0,
            tie:0,
            displayScore :function() {

                return `No. of Matches Won:${counter.win},Lost:${counter.lose},tie:${counter.tie}`;
            }
        };

        function generateComputerChoice() {

            const choices = ['ROCK', 'PAPER', 'SCISSORS'];
            const randomNumber = Math.floor(Math.random() * 3);
            return choices[randomNumber];
        }

        function getResult(userMove, computerMove) {

            if (userMove === computerMove) return `It's a Tie`;
            if ((userMove === 'ROCK' && computerMove === 'SCISSORS') ||
                (userMove === 'PAPER' && computerMove === 'ROCK') ||
                (userMove === 'SCISSORS' && computerMove === 'PAPER')) {
                return 'Player wins a point';
            }
            return 'Computer wins a point';
        }

        function showResult(userMove, computerMove, resultMsg) {

            localStorage.setItem('Score',JSON.stringify(counter));
            document.querySelector("#userMove").innerText=`You Have Chosen ${userMove}`;
            document.querySelector("#computerMove").innerText=`Opponent Have Chosen ${computerMove}`;
            // alert(`Your Choice : ${userMove} | ${computerMove} | ${resultMsg}`);
            updateScores(resultMsg);
        }

        function updateScores(resultMsg) {

            if (resultMsg === 'Player wins a point') {
                pScore += 1;
            } else if (resultMsg === 'Computer wins a point') {
                cScore += 1;
            }
            document.querySelector('#Player').innerText = `Player : ${pScore}`;
            document.querySelector('#Computer').innerText = `Computer : ${cScore}`;
            checkForWinner();
            matchCounter();
        }

        function play(userMove) {

            const computerChoice = generateComputerChoice();
            const computerChoiceMsg = `Computer's Choice : ${computerChoice}`;
            const resultMsg = getResult(userMove, computerChoice);
            showResult(userMove, computerChoiceMsg, resultMsg);   
        }

        function checkForWinner() {

            if (pScore === WINNING_SCORE) {
                alert('Congratulations! Player wins the match!');    
                resetScores()
                document.querySelector("#userMove").innerText=`YOU WIN`;
            } 
            else if (cScore === WINNING_SCORE) {
               resetScores()
               document.querySelector("#computerMove").innerText=`YOU LOSE!`;
               alert('Computer wins the match! Better luck next time.');
               
               
               
            }
        }

        function matchCounter(matchesWon,matchesLose) {

            document.querySelector('#mw').innerText = `Matches Won: ${matchesWon}`;
            document.querySelector('#ml').innerText = `Matches Lost: ${matchesLost}`;

        }
 
        function resetScores() {

            pScore = 0;
            cScore = 0;
            document.querySelector('#Player').innerText = `Player : ${pScore}`;
            document.querySelector('#Computer').innerText = `Computer : ${cScore}`;
            document.querySelector("#userMove").innerText=``;
            document.querySelector("#computerMove").innerText=``;
           
        }
        document.addEventListener('keydown', function(event) {
            switch (event.key.toUpperCase()) {
                case 'R':
                    play('ROCK');
                    break;
                case 'P':
                    play('PAPER');
                    break;
                case 'S':
                    play('SCISSORS');
                    break;
                case '1':
                    play('ROCK');
                    break;
                case '2':
                    play('PAPER');
                    break;
                case '3':
                    play('SCISSORS');
                    break;
            }
        });

        
        
    </script>
</body>
</html>
